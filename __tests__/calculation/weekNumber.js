const test = require('ava')

const PlainDate = require('../..')
const { weekNumber } = require('../../calculation')


test('returns the ISO week number of a given date', t => {
	t.is(weekNumber(new PlainDate(2018, 1, 1)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 2)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 3)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 4)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 5)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 6)), 1)
	t.is(weekNumber(new PlainDate(2018, 1, 7)), 1)
	t.is(weekNumber(new PlainDate(2018, 5, 16)), 20)
	t.is(weekNumber(new PlainDate(2018, 12, 30)), 52)
	t.is(weekNumber(new PlainDate(2018, 12, 31)), 1)
	t.is(weekNumber(new PlainDate(2017, 1, 1)), 52)
	t.is(weekNumber(new PlainDate(2016, 1, 1)), 53)
	t.is(weekNumber(new PlainDate(2015, 12, 28)), 53)
	t.is(weekNumber(new PlainDate(2015, 12, 27)), 52)
	t.is(weekNumber(new PlainDate(2016, 1, 4)), 1)
	t.is(weekNumber(new PlainDate(2016, 1, 3)), 53)
})

test('returns the ISO week number of the first day in a given month', t => {
	t.is(weekNumber(new PlainDate(2018, 1)), 1)
	t.is(weekNumber(new PlainDate(2018, 2)), 5)
	t.is(weekNumber(new PlainDate(2018, 3)), 9)
	t.is(weekNumber(new PlainDate(2018, 4)), 13)
	t.is(weekNumber(new PlainDate(2018, 5)), 18)
	t.is(weekNumber(new PlainDate(2018, 6)), 22)
	t.is(weekNumber(new PlainDate(2018, 7)), 26)
	t.is(weekNumber(new PlainDate(2018, 8)), 31)
	t.is(weekNumber(new PlainDate(2018, 9)), 35)
	t.is(weekNumber(new PlainDate(2018, 10)), 40)
	t.is(weekNumber(new PlainDate(2018, 11)), 44)
	t.is(weekNumber(new PlainDate(2018, 12)), 48)
	t.is(weekNumber(new PlainDate(2016, 1)), 53)
})
